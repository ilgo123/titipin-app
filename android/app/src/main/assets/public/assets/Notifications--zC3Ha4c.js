import{u as b,a as p,r as l,s as n,j as e,L as j,B as d}from"./index-ClXmW7HF.js";import{C as N}from"./chevron-left-DLbePdLL.js";import{T as v}from"./trash-2-KhomIK7G.js";function _(){const o=b(),{user:r}=p(),[i,c]=l.useState([]),[u,x]=l.useState(!0);l.useEffect(()=>{f(),m()},[]);const f=async()=>{const{data:t}=await n.from("notifications").select("*").eq("user_id",r.id).order("created_at",{ascending:!1}).limit(50);c(t||[]),x(!1)},m=async()=>{await n.from("notifications").update({is_read:!0}).eq("user_id",r.id).eq("is_read",!1)},h=async()=>{confirm("Hapus semua notifikasi?")&&(await n.from("notifications").delete().eq("user_id",r.id),c([]))},g=t=>{const a=Math.floor((new Date-new Date(t))/1e3);let s=a/31536e3;return s>1?Math.floor(s)+" tahun lalu":(s=a/2592e3,s>1?Math.floor(s)+" bulan lalu":(s=a/86400,s>1?Math.floor(s)+" hari lalu":(s=a/3600,s>1?Math.floor(s)+" jam lalu":(s=a/60,s>1?Math.floor(s)+" menit lalu":"Baru saja"))))};return e.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[e.jsxs("div",{className:"bg-white sticky top-0 z-10 px-6 pt-6 pb-4 shadow-sm flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>o(-1),className:"p-2 -ml-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(N,{size:24,className:"text-slate-900"})}),e.jsx("h1",{className:"text-xl font-black text-slate-900",children:"Notifikasi ðŸ””"})]}),i.length>0&&e.jsx("button",{onClick:h,className:"p-2 text-red-500 hover:bg-red-50 rounded-full",children:e.jsx(v,{size:18})})]}),e.jsx("div",{className:"p-4 space-y-3",children:u?e.jsx("div",{className:"flex justify-center py-10",children:e.jsx(j,{className:"animate-spin text-slate-400"})}):i.length===0?e.jsxs("div",{className:"text-center py-20 opacity-50 flex flex-col items-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center mb-4 text-gray-400",children:e.jsx(d,{size:24})}),e.jsx("h3",{className:"font-bold text-gray-600",children:"Sepi banget..."}),e.jsx("p",{className:"text-xs text-gray-400",children:"Belum ada kabar terbaru buatmu."})]}):i.map(t=>e.jsxs("div",{onClick:()=>t.link&&o(t.link),className:`p-4 rounded-2xl border transition-all cursor-pointer relative overflow-hidden ${t.is_read?"bg-white border-gray-100":"bg-blue-50 border-blue-100"}`,children:[!t.is_read&&e.jsx("div",{className:"absolute top-4 right-4 w-2 h-2 bg-blue-500 rounded-full"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center shrink-0 ${t.title.includes("Dompet")?"bg-green-100 text-green-600":t.title.includes("Pesan")?"bg-blue-100 text-blue-600":"bg-orange-100 text-orange-600"}`,children:e.jsx(d,{size:18})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-sm text-slate-900",children:t.title}),e.jsx("p",{className:"text-xs text-slate-500 mt-1 leading-relaxed",children:t.message}),e.jsx("p",{className:"text-[10px] text-gray-400 mt-2 font-medium",children:g(t.created_at)})]})]})]},t.id))})]})}export{_ as default};
