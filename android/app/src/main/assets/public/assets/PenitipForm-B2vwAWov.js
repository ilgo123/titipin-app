import{u as b,a as h,r as x,j as e,L as j,A as v,z as n,s as N}from"./index-ClXmW7HF.js";import{C as y}from"./chevron-left-DLbePdLL.js";import{P as w}from"./package-D4vBBs2Z.js";import{M as m}from"./map-pin-IFDHxthE.js";function I(){const o=b(),{user:u}=h(),[i,l]=x.useState(!1),[t,r]=x.useState({item:"",from:"",to:"",price:"",tip:""}),c=(parseInt(t.price)||0)+(parseInt(t.tip)||0),g=a=>new Intl.NumberFormat("id-ID").format(a),f=async a=>{a.preventDefault(),l(!0);const d=parseInt(t.price),p=parseInt(t.tip);if(!t.item||!d||!p||!t.from||!t.to){n.error("Mohon lengkapi data dulu ya!"),l(!1);return}try{const{error:s}=await N.rpc("create_order_transaction",{p_item:t.item,p_price:d,p_tip:p,p_from:t.from,p_to:t.to,p_user_id:u.id});if(s)throw s;n.success("Berhasil! Saldo terpotong & Order dibuat."),o("/activity")}catch(s){n.error("Gagal: "+s.message)}finally{l(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col p-6 pb-32",children:[e.jsxs("button",{onClick:()=>o("/"),className:"mb-6 flex items-center gap-2 font-bold text-gray-500 hover:text-slate-900 transition-colors",children:[e.jsx(y,{size:20})," Batal"]}),e.jsx("h1",{className:"text-3xl font-black text-slate-900 mb-6",children:"Buat Titipan"}),e.jsxs("form",{className:"bg-white p-6 rounded-[2rem] shadow-sm space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-2",children:"Barang Apa?"}),e.jsxs("div",{className:"relative",children:[e.jsx(w,{className:"absolute left-4 top-4 text-slate-400",size:20}),e.jsx("input",{type:"text",required:!0,placeholder:"Contoh: Kopi Kenangan",className:"w-full pl-12 pr-4 py-4 bg-gray-50 rounded-2xl font-bold text-slate-800 outline-none focus:ring-2 focus:ring-slate-900 transition-all placeholder:font-normal",value:t.item,onChange:a=>r({...t,item:a.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-2",children:"Harga Barang"}),e.jsx("input",{type:"number",required:!0,placeholder:"Rp 0",className:"w-full p-4 bg-gray-50 rounded-2xl font-bold text-slate-800 outline-none focus:ring-2 focus:ring-slate-900 transition-all",value:t.price,onChange:a=>r({...t,price:a.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-green-600 uppercase mb-2",children:"Tip Traveler"}),e.jsx("input",{type:"number",required:!0,placeholder:"Rp 5.000",className:"w-full p-4 bg-green-50 text-green-700 rounded-2xl font-bold outline-none focus:ring-2 focus:ring-green-500 transition-all placeholder:text-green-300 placeholder:font-normal",value:t.tip,onChange:a=>r({...t,tip:a.target.value})})]})]}),e.jsxs("div",{className:"space-y-3 pt-2",children:[e.jsxs("div",{className:"flex items-center gap-3 bg-gray-50 p-3 rounded-2xl border border-transparent focus-within:border-red-200 focus-within:bg-red-50 transition-colors",children:[e.jsx(m,{size:24,className:"text-red-500 shrink-0"}),e.jsx("input",{type:"text",required:!0,placeholder:"Beli di mana?",className:"bg-transparent w-full outline-none font-bold text-slate-700 placeholder:font-normal",value:t.from,onChange:a=>r({...t,from:a.target.value})})]}),e.jsxs("div",{className:"flex items-center gap-3 bg-gray-50 p-3 rounded-2xl border border-transparent focus-within:border-green-200 focus-within:bg-green-50 transition-colors",children:[e.jsx(m,{size:24,className:"text-green-500 shrink-0"}),e.jsx("input",{type:"text",required:!0,placeholder:"Antar ke mana?",className:"bg-transparent w-full outline-none font-bold text-slate-700 placeholder:font-normal",value:t.to,onChange:a=>r({...t,to:a.target.value})})]})]})]}),e.jsx("div",{className:"fixed bottom-0 left-0 w-full bg-white border-t border-gray-100 p-5 shadow-[0_-5px_30px_-10px_rgba(0,0,0,0.1)] z-30",children:e.jsxs("div",{className:"max-w-md mx-auto flex items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-wider mb-0.5",children:"Total Estimasi"}),e.jsxs("p",{className:"text-xl font-black text-slate-900",children:["Rp ",g(c)]})]}),e.jsx("button",{onClick:f,disabled:i||c===0,className:"bg-slate-900 text-white px-6 py-4 rounded-xl font-bold shadow-xl shadow-slate-200 hover:bg-slate-800 active:scale-95 disabled:opacity-50 disabled:shadow-none transition-all flex items-center gap-2",children:i?e.jsx(j,{className:"animate-spin"}):e.jsxs(e.Fragment,{children:["Posting ",e.jsx(v,{size:18})]})})]})})]})}export{I as default};
