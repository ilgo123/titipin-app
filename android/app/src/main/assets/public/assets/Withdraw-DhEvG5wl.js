import{u as b,a as h,r,j as e,m as f,L as g,A as j,n,s as k}from"./index-ClXmW7HF.js";import{C as N}from"./circle-check-D5qtfpr7.js";import{C as v}from"./chevron-left-DLbePdLL.js";import{W as y}from"./wallet-BqOR6YG4.js";import{B as w}from"./building-2-QS310Gwe.js";import{C}from"./credit-card-CKxOIwSQ.js";function D(){const o=b(),{user:l,checkSession:x}=h(),[u,m]=r.useState(1),[i,c]=r.useState(!1),[a,t]=r.useState({bank:"",number:"",holder:"",amount:""}),d=s=>new Intl.NumberFormat("id-ID").format(s||0),p=async()=>{if(!a.bank||!a.number||!a.holder||!a.amount)return n.error("Lengkapi data dulu ya!");if(parseInt(a.amount)<5e4)return n.error("Minimal penarikan Rp 50.000");if(parseInt(a.amount)>l.balance)return n.error("Saldo kamu gak cukup!");c(!0);try{const{error:s}=await k.rpc("request_withdraw",{p_user_id:l.id,p_amount:parseInt(a.amount),p_bank_name:a.bank,p_account_number:a.number,p_account_holder:a.holder});if(s)throw s;await x(),m(2)}catch(s){n.error("Gagal: "+s.message)}finally{c(!1)}};return u===2?e.jsxs("div",{className:"min-h-screen bg-white flex flex-col items-center justify-center p-8 text-center",children:[e.jsx(f.div,{initial:{scale:0},animate:{scale:1},className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mb-6 text-green-600",children:e.jsx(N,{size:40})}),e.jsx("h2",{className:"text-2xl font-black text-slate-900 mb-2",children:"Permintaan Terkirim!"}),e.jsxs("p",{className:"text-gray-500 text-sm mb-8 leading-relaxed",children:["Dana sebesar ",e.jsxs("b",{children:["Rp ",d(a.amount)]})," akan masuk ke rekening ",e.jsx("b",{children:a.bank})," kamu dalam 1x24 jam kerja."]}),e.jsx("button",{onClick:()=>o("/"),className:"w-full bg-slate-900 text-white py-4 rounded-xl font-bold",children:"Kembali ke Home"})]}):e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[e.jsx("div",{className:"bg-white px-6 pt-6 pb-4 shadow-sm z-10",children:e.jsxs("button",{onClick:()=>o(-1),className:"flex items-center gap-2 text-slate-500 font-bold hover:text-slate-900 transition-colors",children:[e.jsx(v,{size:24})," Batal"]})}),e.jsxs("div",{className:"flex-1 p-6 flex flex-col max-w-md mx-auto w-full",children:[e.jsx("h1",{className:"text-2xl font-black text-slate-900 mb-1",children:"Tarik Saldo ðŸ’¸"}),e.jsx("p",{className:"text-gray-400 text-sm mb-6",children:"Cairkan hasil kerjamu ke rekening bank."}),e.jsxs("div",{className:"bg-slate-900 text-white p-5 rounded-2xl mb-6 flex items-center justify-between shadow-lg shadow-slate-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Saldo Bisa Ditarik"}),e.jsxs("p",{className:"text-2xl font-black",children:["Rp ",d(l?.balance)]})]}),e.jsx("div",{className:"p-3 bg-white/10 rounded-full",children:e.jsx(y,{size:24})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm space-y-5 border border-slate-100",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase",children:"Nama Bank / E-Wallet"}),e.jsxs("div",{className:"relative",children:[e.jsx(w,{className:"absolute left-4 top-3.5 text-gray-400",size:20}),e.jsxs("select",{className:"w-full bg-gray-50 border border-gray-200 text-slate-800 font-bold rounded-xl pl-12 pr-4 py-3 outline-none focus:ring-2 focus:ring-slate-900 appearance-none",value:a.bank,onChange:s=>t({...a,bank:s.target.value}),children:[e.jsx("option",{value:"",children:"Pilih Bank Tujuan"}),e.jsx("option",{value:"BCA",children:"Bank BCA"}),e.jsx("option",{value:"Mandiri",children:"Bank Mandiri"}),e.jsx("option",{value:"BRI",children:"Bank BRI"}),e.jsx("option",{value:"BNI",children:"Bank BNI"}),e.jsx("option",{value:"GoPay",children:"GoPay"}),e.jsx("option",{value:"OVO",children:"OVO"}),e.jsx("option",{value:"Dana",children:"Dana"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase",children:"Nomor Rekening"}),e.jsxs("div",{className:"relative",children:[e.jsx(C,{className:"absolute left-4 top-3.5 text-gray-400",size:20}),e.jsx("input",{type:"number",placeholder:"Contoh: 1234567890",className:"w-full bg-gray-50 border border-gray-200 text-slate-800 font-bold rounded-xl pl-12 pr-4 py-3 outline-none focus:ring-2 focus:ring-slate-900",value:a.number,onChange:s=>t({...a,number:s.target.value})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase",children:"Atas Nama (Pemilik)"}),e.jsx("input",{type:"text",placeholder:"Nama sesuai buku tabungan",className:"w-full bg-gray-50 border border-gray-200 text-slate-800 font-bold rounded-xl px-4 py-3 outline-none focus:ring-2 focus:ring-slate-900",value:a.holder,onChange:s=>t({...a,holder:s.target.value})})]}),e.jsx("div",{className:"h-px bg-gray-100 my-2"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase",children:"Nominal Penarikan"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-3 text-slate-900 font-bold text-lg",children:"Rp"}),e.jsx("input",{type:"number",placeholder:"0",className:"w-full bg-white border-2 border-slate-100 text-slate-900 font-black text-xl rounded-xl pl-12 pr-4 py-3 outline-none focus:border-slate-900 transition-colors",value:a.amount,onChange:s=>t({...a,amount:s.target.value})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>t({...a,amount:l.balance}),className:"text-xs font-bold text-blue-600 hover:underline",children:"Tarik Semua Saldo"})})]})]}),e.jsx("button",{onClick:p,disabled:i||!a.amount,className:"mt-6 w-full bg-slate-900 text-white py-4 rounded-2xl font-bold text-lg shadow-xl hover:bg-slate-800 active:scale-95 disabled:opacity-50 transition-all flex items-center justify-center gap-2",children:i?e.jsx(g,{className:"animate-spin"}):e.jsxs(e.Fragment,{children:["Cairkan Dana ",e.jsx(j,{})]})})]})]})}export{D as default};
