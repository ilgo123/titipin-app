import{u as h,a as u,r,j as e,m as f,L as g,n as d,s as j}from"./index-ClXmW7HF.js";import{C as w}from"./circle-check-D5qtfpr7.js";import{C as N}from"./chevron-left-DLbePdLL.js";import{W as y}from"./wallet-BqOR6YG4.js";import{C as v}from"./credit-card-CKxOIwSQ.js";function z(){const n=h(),{user:m,checkSession:x}=u(),[a,o]=r.useState(""),[k,i]=r.useState(!1),[t,l]=r.useState("input"),p=[1e4,2e4,5e4,1e5,2e5,5e5],b=async()=>{if(!a||a<1e4)return d.error("Minimal Top Up Rp 10.000 ya!");l("processing"),i(!0),setTimeout(async()=>{try{const{error:s}=await j.rpc("topup_balance",{p_user_id:m.id,p_amount:parseInt(a)});if(s)throw s;await x(),l("success")}catch(s){d.error(s.message),l("input")}finally{i(!1)}},2e3)},c=s=>new Intl.NumberFormat("id-ID").format(s);return t==="success"?e.jsxs("div",{className:"min-h-screen bg-green-500 flex flex-col items-center justify-center p-6 text-white text-center",children:[e.jsx(f.div,{initial:{scale:0},animate:{scale:1},className:"w-24 h-24 bg-white rounded-full flex items-center justify-center mb-6 shadow-xl",children:e.jsx(w,{size:48,className:"text-green-500"})}),e.jsx("h1",{className:"text-3xl font-black mb-2",children:"Top Up Berhasil!"}),e.jsxs("p",{className:"opacity-90 mb-8",children:["Saldo Rp ",c(a)," telah ditambahkan."]}),e.jsx("button",{onClick:()=>n("/"),className:"w-full max-w-xs bg-white text-green-600 font-bold py-4 rounded-2xl shadow-lg active:scale-95 transition-all",children:"Kembali ke Home"})]}):e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[e.jsx("div",{className:"bg-white px-6 pt-6 pb-4 shadow-sm z-10",children:e.jsxs("button",{onClick:()=>n(-1),className:"flex items-center gap-2 text-slate-500 font-bold hover:text-slate-900 transition-colors",children:[e.jsx(N,{size:24})," Batal"]})}),e.jsxs("div",{className:"flex-1 p-6 flex flex-col max-w-md mx-auto w-full",children:[e.jsx("h1",{className:"text-2xl font-black text-slate-900 mb-1",children:"Isi Saldo ðŸ’³"}),e.jsx("p",{className:"text-gray-400 text-sm mb-8",children:"Pilih nominal atau ketik sendiri."}),e.jsxs("div",{className:"bg-white p-6 rounded-[2rem] shadow-sm mb-6 border border-slate-100",children:[e.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-2 block",children:"Nominal Top Up"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-0 top-2 text-2xl font-black text-slate-300",children:"Rp"}),e.jsx("input",{type:"number",value:a,onChange:s=>o(s.target.value),placeholder:"0",disabled:t==="processing",className:"w-full pl-10 py-2 text-4xl font-black text-slate-900 outline-none border-b-2 border-gray-100 focus:border-slate-900 transition-colors placeholder:text-gray-200 bg-transparent"})]})]}),e.jsx("div",{className:"grid grid-cols-3 gap-3 mb-8",children:p.map(s=>e.jsx("button",{onClick:()=>o(s),className:`py-3 rounded-xl font-bold text-sm border transition-all active:scale-95
                        ${parseInt(a)===s?"bg-slate-900 text-white border-slate-900 shadow-md":"bg-white text-slate-600 border-gray-200 hover:border-slate-300"}`,children:c(s)},s))}),e.jsxs("div",{className:"bg-blue-50 border border-blue-100 p-4 rounded-2xl flex gap-3 items-start mb-auto",children:[e.jsx("div",{className:"p-2 bg-white rounded-full text-blue-600 shadow-sm",children:e.jsx(y,{size:18})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-800 text-sm",children:"Metode Pembayaran"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Ini hanya simulasi. Saldo akan langsung bertambah tanpa potong pulsa/bank beneran."})]})]}),e.jsx("button",{onClick:b,disabled:!a||t==="processing",className:"w-full bg-slate-900 text-white py-4 rounded-2xl font-bold text-lg shadow-xl shadow-slate-200 hover:bg-slate-800 active:scale-95 disabled:opacity-50 disabled:shadow-none transition-all flex items-center justify-center gap-2 mt-6",children:t==="processing"?e.jsxs(e.Fragment,{children:[" ",e.jsx(g,{className:"animate-spin"})," Memproses... "]}):e.jsxs(e.Fragment,{children:[" ",e.jsx(v,{size:20})," Bayar Sekarang "]})})]})]})}export{z as default};
